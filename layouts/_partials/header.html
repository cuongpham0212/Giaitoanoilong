<header class="bg-gray-100 shadow-md sticky top-0 z-50">
  <!-- Banner Image -->
  <div class="w-full">
    <img src="{{ "images/banner.jpg" | relURL }}" alt="Banner" class="w-full h-48 object-cover">
  </div>

  <!-- Header Content -->
  <div class="container mx-auto flex items-center justify-between p-4 relative">
    <!-- Logo -->
    <h1 class="text-2xl font-bold text-blue-600">
      <a href="{{ .Site.BaseURL }}" class="hover:text-blue-800">{{ .Site.Title }}</a>
    </h1>

    <!-- Hamburger button (mobile) -->
    <button id="menu-btn" class="p-2 border rounded bg-blue-500 text-white lg:hidden">
      ☰ MENU
    </button>

    <!-- Nav links -->
    <nav id="menu"
      class="hidden flex-col space-y-2 absolute top-20 right-4 bg-white border rounded p-4 shadow-md
            lg:static lg:flex lg:flex-row lg:space-y-0 lg:space-x-6 lg:border-0 lg:p-0 lg:shadow-none transition-all duration-300">
      {{ range .Site.Menus.main }}
        {{ if .HasChildren }}
          <div class="group relative submenu-parent">
            <a href="{{ .URL | relURL }}" 
               class="flex items-center text-gray-700 hover:text-blue-600 hover:font-bold transition">
              {{ .Name }} ▾
            </a>
            <div class="submenu hidden absolute top-full left-0 mt-1 bg-white border rounded shadow-lg min-w-[180px] transform origin-top transition-all duration-300 ease-out scale-y-0 opacity-0">
              {{ range .Children }}
                <a href="{{ .URL | relURL }}" 
                   class="block px-4 py-2 text-gray-700 hover:bg-blue-50 hover:text-blue-600 hover:font-semibold transition">
                   {{ .Name }}
                </a>
              {{ end }}
            </div>
          </div>
        {{ else }}
          <a href="{{ .URL | relURL }}" 
             class="text-gray-700 hover:text-blue-600 hover:font-bold transition">
            {{ .Name }}
          </a>
        {{ end }}
      {{ end }}
    </nav>
  </div>
</header>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const menuBtn = document.getElementById("menu-btn");
    const menu = document.getElementById("menu");
    const submenuParents = document.querySelectorAll(".submenu-parent");

    // Toggle menu mobile
    menuBtn.addEventListener("click", () => {
      menu.classList.toggle("hidden");
    });

    // Submenu animation for desktop & mobile
    submenuParents.forEach(parent => {
      const submenu = parent.querySelector(".submenu");
      
      // Hover mở submenu trên desktop
      parent.addEventListener("mouseenter", () => {
        if (window.innerWidth >= 1024) {
          submenu.classList.remove("hidden");
          setTimeout(() => {
            submenu.classList.remove("opacity-0", "scale-y-0");
          }, 10);
        }
      });

      parent.addEventListener("mouseleave", () => {
        if (window.innerWidth >= 1024) {
          submenu.classList.add("opacity-0", "scale-y-0");
          setTimeout(() => submenu.classList.add("hidden"), 300);
        }
      });

      // Click mở submenu trên mobile
      parent.addEventListener("click", (e) => {
        if (window.innerWidth < 1024) {
          e.preventDefault();
          submenu.classList.toggle("hidden");
          submenu.classList.toggle("opacity-0");
          submenu.classList.toggle("scale-y-0");
        }
      });
    });
  });
</script>

<style>
  /* Transition submenu mượt */
  .submenu {
    transition: transform 0.3s ease, opacity 0.3s ease;
    transform-origin: top;
  }
  /* Hover item */
  nav a {
    transition: all 0.2s ease;
  }
  nav a:hover {
    color: #1d4ed8;
    font-weight: bold;
  }
</style>
