<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>{{ if .Title }}{{ .Title }} | {{ end }}{{ .Site.Title }}</title>

  <!-- SEO Meta -->
  {{ with .Description }}
    <meta name="description" content="{{ . }}">
  {{ else }}
    <meta name="description" content="{{ .Site.Params.description }}">
  {{ end }}

  <meta name="author" content="{{ .Site.Author.name | default "Admin" }}">
  <link rel="canonical" href="{{ .Permalink }}">

  <!-- Open Graph -->
  <meta property="og:title" content="{{ .Title }}">
  <meta property="og:description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">
  <meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">
  <meta property="og:url" content="{{ .Permalink }}">
  {{ with .Params.banner }}
    <meta property="og:image" content="{{ . | absURL }}">
  {{ else }}
    <meta property="og:image" content="{{ "images/default-banner.jpg" | absURL }}">
  {{ end }}

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{{ .Title }}">
  <meta name="twitter:description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">
  <meta name="twitter:image" content="{{ with .Params.banner }}{{ . | absURL }}{{ else }}{{ "images/default-banner.jpg" | absURL }}{{ end }}">

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- CSS pipeline của Hugo -->
  {{ $styles := resources.Get "css/main.css" | postCSS }}
  <link rel="stylesheet" href="{{ $styles.RelPermalink }}">

  <!-- Favicon -->
  <link rel="icon" href="{{ "favicon.ico" | relURL }}" type="image/x-icon">
  <link rel="icon" href="{{ "favicon-32.png" | relURL }}" type="image/png">
  <link rel="apple-touch-icon" href="{{ "favicon-180.png" | relURL }}">
{{ if .IsPage }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ .Permalink }}"
  },
  "headline": "{{ .Title | htmlEscape }}",
  "description": "{{ with .Description }}{{ . | htmlEscape }}{{ else }}{{ .Site.Params.description | htmlEscape }}{{ end }}",
  "image": [
    {{- if .Params.banner -}}
      "{{ .Params.banner }}"
    {{- else -}}
      "{{ "/images/default-banner.jpg" | absURL }}"
    {{- end -}}
  ],
  "author": {
    "@type": "Person",
    "name": "{{ with .Params.author }}{{ . }}{{ else }}{{ .Site.Params.author }}{{ end }}"
  },
  "publisher": {
    "@type": "Organization",
    "name": "{{ .Site.Title }}",
    "logo": {
      "@type": "ImageObject",
      "url": "{{ "/favicon-180.png" | absURL }}"
    }
  },
  "datePublished": "{{ .Date.Format "2006-01-02" }}",
  "dateModified": "{{ .Lastmod.Format "2006-01-02" }}"
}
</script>
{{ end }}

{{/* === Schema cho Article (Bài viết) === */}}
{{ if .IsPage }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ .Permalink }}"
  },
  "headline": "{{ .Title | htmlEscape }}",
  "description": "{{ with .Description }}{{ . | htmlEscape }}{{ else }}{{ .Site.Params.description | htmlEscape }}{{ end }}",
  "image": [
    {{- if .Params.banner -}}
      "{{ .Params.banner }}"
    {{- else -}}
      "{{ "/images/default-banner.jpg" | absURL }}"
    {{- end -}}
  ],
  "author": {
    "@type": "Person",
    "name": "{{ with .Params.author }}{{ . }}{{ else }}{{ .Site.Params.author }}{{ end }}"
  },
  "publisher": {
    "@type": "Organization",
    "name": "{{ .Site.Title }}",
    "logo": {
      "@type": "ImageObject",
      "url": "{{ "/favicon-180.png" | absURL }}"
    }
  },
  "datePublished": "{{ .Date.Format "2006-01-02" }}",
  "dateModified": "{{ .Lastmod.Format "2006-01-02" }}"
}
</script>
{{ end }}

{{/* === Schema cho Trang chủ === */}}
{{ if .IsHome }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "{{ .Site.Title }}",
  "url": "{{ .Site.BaseURL }}",
  "description": "{{ .Site.Params.description | htmlEscape }}",
  "publisher": {
    "@type": "Organization",
    "name": "{{ .Site.Title }}"
  }
}
</script>
{{ end }}

{{/* === Schema Breadcrumb === */}}
{{ if and (not .IsHome) .Title }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Trang chủ",
      "item": "{{ .Site.BaseURL }}"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "{{ .Title }}",
      "item": "{{ .Permalink }}"
    }
  ]
}
</script>
{{ end }}

{{/* === Open Graph cho Facebook/Zalo === */}}
<meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">
<meta property="og:title" content="{{ .Title }} | {{ .Site.Title }}">
<meta property="og:description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">
<meta property="og:url" content="{{ .Permalink }}">
<meta property="og:site_name" content="{{ .Site.Title }}">
<meta property="og:image" content="{{ with .Params.banner }}{{ . }}{{ else }}{{ "/images/default-banner.jpg" | absURL }}{{ end }}">

{{/* === Twitter Card === */}}
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ .Title }} | {{ .Site.Title }}">
<meta name="twitter:description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">
<meta name="twitter:image" content="{{ with .Params.banner }}{{ . }}{{ else }}{{ "/images/default-banner.jpg" | absURL }}{{ end }}">

</head>
